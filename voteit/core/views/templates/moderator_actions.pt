<metal:main xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="voteit.core">
<span class="action_menu dropdown_menu cogwheel">
    <a class="menu_header" title="Moderator menu" i18n:attributes="title">&nbsp;</a>
    <ul class="menu_body">
    	
		<li><span class="menusection" i18n:translate="">Actions here</span></li>

        <li tal:condition="context_has_permission('Edit', context)">
            <a tal:attributes="href api.resource_url(context, request) + '@@edit'"
               i18n:translate="">Edit</a>
        </li>
        <li tal:condition="context_has_permission('Delete', context)">
            <a tal:attributes="href api.resource_url(context, request) + '@@delete'"
               i18n:translate="">Delete</a>
        </li>

        <tal:siteroot tal:condition="context.content_type == 'SiteRoot' and
                                    context_has_permission('Manage Server', context)">
        <tal:comment condition="False">
            Common functions for siteroot
        </tal:comment>
        <li>
            <a tal:attributes="href api.resource_url(context, request) + '@@server_logs'"
               i18n:translate="">Server logs</a>
        </li>
        </tal:siteroot>

        <li tal:condition="context.content_type == 'Poll' and
                               context_has_permission('Edit', context) and
                               context.get_poll_plugin().get_settings_schema()|False">
            <a tal:attributes="href api.resource_url(context, request) + '@@poll_config'"
               i18n:translate="">Poll settings</a>
        </li>

        <tal:wf define="state_id context.get_workflow_state()|False" condition="state_id">
	    	<li><span class="menusection" i18n:translate="">Change workflow state</span></li>
			
	        <li tal:condition="state_id">
	            <span class="readonly iconpadding ${state_id}">
	            	<span>
		            	${api.translate(state_id.title())}
						- (<span i18n:translate="">current</span>)
					</span>
	            </span>
	        </li>
	
	        <tal:states tal:condition="states|False">
	            <tal:iterate repeat="state states">
	            <li>
	                <a class="confirm-state iconpadding ${state.name}"
					   tal:attributes="href api.resource_url(context, request) + '@@state' + '?state=' + state.name">
	                   	<span tal:content="api.translate(state.title)">Title</span>
	                </a>
	            </li>
	            </tal:iterate>
	        </tal:states>
		</tal:wf>

    </ul>
</span>
</metal:main>
