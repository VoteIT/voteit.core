<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="api.main_template.macros['master']"
	  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
	  i18n:domain="voteit.core">
<body>

<metal:blank_heading fill-slot="page_heading"></metal:blank_heading>

<div metal:fill-slot="content" class="content_wrapper" id="search">
    <div tal:replace="structure search_form"></div>

    <tal:results condition="results">
        <div class="listing_block">
            <span tal:content="results_count">1</span>
            <span tal:content="results_ts(results_count)">item</span>
        </div>
    
        <tal:iterate repeat="brain results">
            <div class="listing_block" tal:define="state_id brain['workflow_state']">
                <h5><a href="${brain.path}" class="${brain['content_type'].lower()} icon iconpadding">
                    ${strip_truncate(brain.title)}
                </a></h5>

                <div class="meta">
                    <tal:creators tal:replace="structure api.get_creators_info(brain['creators'], request, portrait = False)">Creators</tal:creators>
                    <span class="hyphen">&#45;</span>
                    <tal:wf condition="state_id|False">
                        <span class="${state_id} icon iconpadding">${state_id}</span>
                        <span class="hyphen">&#45;</span>
                    </tal:wf>
                    <span class="time" tal:content="api.dt_util.relative_time_format(brain['created'])"></span>
                </div>
            </div>
        </tal:iterate>
        
    </tal:results>

    <tal:no_results condition="not results and query_data|False">
        <div i18n:translate="">No search results</div>
    </tal:no_results>

</div>
</body>
</html>
