<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="load: ${api.template_dir}content.pt"
	  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
	  i18n:domain="voteit.core">
<body>
<tal:blank metal:fill-slot="page_heading"></tal:blank>
<div metal:fill-slot="content">
    <tal:menu tal:condition="api.meeting" 
        replace="structure api.render_single_view_component(context, request, 'tabs', 'manage_tickets')">
        Tabs
    </tal:menu>
    <h1 i18n:translate="">Send meeting tickets</h1>

    <tal:nothing_to_do condition="not emails|True">
        <div i18n:translate="">Doesn't seem to be anything to do...</div>
        <a class="buttonize" href="${request.resource_url(context)}" i18n:translate="">Back</a>
    </tal:nothing_to_do>

    <tal:sender condition="emails|False">
        <div id="status" i18n:translate="">Sending emails. In case something goes wrong, you may reload this page and try again.</div>
        <form id="send_invitations_form" action="${request.resource_url(api.meeting, 'send_tickets')}" method="post">
            <button name="send" type="submit" value="send">
                <span i18n:translate="">Send</span>
            </button>
        </form>
        <table class="listing">
            <thead>
                <tr>
                    <th i18n:translate="">Total</th>
                    <th i18n:translate="">Remaining</th>
                    <th colspan="2" i18n:translate="">Completed</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>${len(emails)}</td>
                    <td><span id="tickets_to_send">${len(emails)}</span></td>
                    <td><span id="completed_percentage">0</span>%</td>
                    <td style="width: 400px;">
                        <div id="completed_percentage_bar"
                             style="float: left; background-color: green; height: 15px; width: 1px;"><!-- --></div>
                        <div style="float: left; background-color: black; height: 1px; width: 100%;"><!-- --></div>
                    </td>
                </tr>
            </tbody>
        </table>
    </tal:sender>
</div>
</body>
</html>
