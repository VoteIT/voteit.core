<tal:main xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="voteit.core">
<div tal:attributes="id '%s-%s' % (api.root.uid, state);
                     class closed_section and 'toggle_area toggle_closed block' or 'toggle_area toggle_opened block';">
    <h6 class="toggle_minimize iconpadding ${state}">
        <span><a href="${request.url}">${section_title}</a></span>
    </h6>
	
    <tal:open_section condition="not closed_section">
	    <ul class="section">
	        <tal:iterate condition="brains" repeat="brain brains">
	            <tal:defs define="current_context request.path.startswith(brain['path'])">
	            <li tal:attributes="class current_context and 'selected minimizable_area' or 'plain minimizable_area'">
	                <tal:moderator_menu condition="api.show_moderator_actions">
	                    <span tal:replace="structure api.get_moderator_actions(brain, request)">
	                         Cogwheel menu
	                    </span>
	                </tal:moderator_menu>
	                <div class="item">
	                    <a tal:attributes="href brain['path']">
	                        <div tal:content="brain['title']">Title</div>
	                        <div tal:condition="brain['content_type'] == 'AgendaItem'" class="info">
	                            <span class="iconpadding proposal cinfo"
	                                  tal:define="unread_count not current_context and count_query(brain['path'], 'Proposal', unread = 1) or 0">
	                                <span>
	                                    <span class="total"
	                                          tal:content="count_query(brain['path'], 'Proposal')">0</span>
	                                    <span class="unread" tal:condition="unread_count">(${unread_count})</span>
	                                </span>
	                            </span>
	                            <span class="iconpadding discussion cinfo"
	                                  tal:define="unread_count not current_context and count_query(brain['path'], 'DiscussionPost', unread = 1) or 0">
	                                <span>
	                                    <span class="total"
	                                          tal:content="count_query(brain['path'], 'DiscussionPost')">0</span>
	                                    <span class="unread" tal:condition="unread_count">(${unread_count})</span>
	                                </span>
	                            </span>
	                        </div>
	                        <div class="clear"><!-- --></div>
	                    </a>
	                </div>
	            </li>
	            </tal:defs>
	        </tal:iterate>
	        <li tal:condition="not brains">
	            <span i18n:translate="">(Nothing)</span>
	        </li>
	    </ul>
    </tal:open_section>
    
    <tal:closed_section condition="closed_section">
        <div class="minimizable_inverted" i18n:translate="">(hidden, click above to open)</div>
    </tal:closed_section>
</div>
</tal:main>
