<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="api.main_template.macros['master']"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="voteit.core">
<body>
    <div metal:fill-slot="content" class="content_wrapper">

	    <h3 i18n:translate="">
	        Showing
	        <span tal:replace="len(participants)" i18n:name="count">5</span>
	        participants
	    </h3>

        <table class="listing">
            <thead>
                <tr>
                    <th i18n:translate="" class="heading">UserID</th>
                    <th i18n:translate="" class="heading">First name</th>
                    <th i18n:translate="" class="heading">Last name</th>
                    <th i18n:translate="" class="heading">Email</th>
                    <th i18n:translate="" class="heading">View</th>
                    <th i18n:translate="" class="heading">Discuss</th>
                    <th i18n:translate="" class="heading">Propose</th>
                    <th i18n:translate="" class="heading">Voter</th>
                    <th i18n:translate="" class="heading">Moderate</th>
                </tr>
            </thead>
            <tbody>
                <tal:iterate repeat="user participants">
                <tr tal:attributes="class repeat.user.odd and 'odd' or 'even'"
                    tal:define="principals context_effective_principals(context, user.userid)">
                        <td>
                            <a tal:content="user.userid"
                               class="inlineinfo"
                               href="${api.get_userinfo_url(user.userid)}">
                            Userid
                            </a>
                        </td>
                        <td tal:content="user.get_field_value('first_name')">Hanna</td>
                        <td tal:content="user.get_field_value('last_name')">VoteIT</td>
                        <td>
                            <a tal:content="user.get_field_value('email')"
                               tal:attributes="href 'mailto:%s' % user.get_field_value('email')">
                                voteit@betahaus.net
                            </a>
                            
                        </td>
                        <td>
                            <span>
                                <span class="yes_icon" i18n:translate="">Yes</span>
                            </span>
                        </td>
                        <td>
                            <span tal:condition="role_discuss in principals">
                                <span class="yes_icon" i18n:translate="">Yes</span>
                            </span>
                        </td>
                        <td>
                            <span tal:condition="role_propose in principals">
                                <span class="yes_icon" i18n:translate="">Yes</span>
                            </span>
                        </td>
                        <td>
                            <span tal:condition="role_voter in principals">
                                <span class="yes_icon" i18n:translate="">Yes</span>
                            </span>
                        </td>
                        <td>
                            <span tal:condition="role_moderator in principals or 'role:Admin' in principals">
                                <span class="yes_icon" i18n:translate="">Yes</span>
                            </span>
                        </td>

                </tr>
                </tal:iterate>
            </tbody>
        </table>
        <br/>
        <a class="buttonize large"
           tal:attributes="href api.resource_url(context, request)">
            <span i18n:translate="">Back</span>
        </a><br/>

    </div> <!-- content -->
</body>
</html>
