<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="api.main_template.macros['master']"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="voteit.core">
<body>
    
    
    <h2 id="page_heading" metal:fill-slot="page_heading" i18n:translate="">
        Showing
        <span tal:replace="len(participants)" i18n:name="count">5</span>
        participants
    </h2>

    <div metal:fill-slot="content" class="content_wrapper">
        <form action="" method="POST" id="deform" class="deform">
        <table class="listing">
            <thead>
                <tr>
                    <th i18n:translate="" class="heading">UserID</th>
                    <th i18n:translate="" class="heading">First name</th>
                    <th i18n:translate="" class="heading">Last name</th>
                    <th i18n:translate="" class="heading">Email</th>
                    <tal:iterate repeat="role roles">
                    <th i18n:translate="" class="heading">${role[1]}</th>
                    </tal:iterate>
                </tr>
            </thead>
            <tbody>
                <tal:iterate repeat="user participants">
                <tr tal:attributes="class repeat.user.odd and 'odd' or 'even'"
                    tal:define="principals context_effective_principals(context, user.userid)">
                        <td>
                            <a tal:content="user.userid"
                               class="inlineinfo"
                               href="${api.get_userinfo_url(user.userid)}">
                            Userid
                            </a>
                            <input type="hidden" name="__start__" value="${user.userid}" />
                        </td>
                        <td tal:content="user.get_field_value('first_name')">Hanna</td>
                        <td tal:content="user.get_field_value('last_name')">VoteIT</td>
                        <td>
                            <a tal:content="user.get_field_value('email')"
                               tal:attributes="href 'mailto:%s' % user.get_field_value('email')">
                                voteit@betahaus.net
                            </a>
                            
                        </td>
                        <tal:roles repeat="role roles">
                        <td>
                            <input type="checkbox" name="group" value="${role[0]}" tal:attributes="checked role[0] in principals and True or None" />
                        </td>
                        </tal:roles>
                        <input type="hidden" name="__end__" value="${user.userid}" />
                </tr>
                </tal:iterate>
                <tr>
                        <td>
                            <input type="hidden" name="__start__" value="new" />
                            <input type="text" name="userid" value="" id="new_userid" />
                        </td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <tal:roles repeat="role roles">
                        <td>
                            <input type="checkbox" name="group" value="${role[0]}" />
                        </td>
                        </tal:roles>
                        <input type="hidden" name="__end__" value="new" />
                </tr>
            </tbody>
        </table>
        <div class="buttons">
        <button id="deformupdate" name="save" type="submit" class="btnText submit" value="save">
            <span>Uppdatera</span>
        </button>
        </div>
        </form>
        <script type="text/javascript">
	      $(document).ready(function (oid) {
	            $("#new_userid").autocomplete({source: [${autocomplete_userids}]});
	            $("#new_userid").autocomplete("option", {"delay": 10, "minLength": 1});
	        }
	      );
    	</script>
    </div> <!-- content -->
</body>
</html>
