<metal:main define-macro="navigation"
            xmlns:i18n="http://xml.zope.org/namespaces/i18n"
            i18n:domain="voteit.core">

    <tal:anon condition="not api.userid">
        <div class="block"
		     tal:content="structure api.render_single_view_component(context, request, 'navigation', 'login')">
        	Login form
        </div>
    </tal:anon>

    <tal:root condition="api.userid and not api.meeting">
        <div class="block">
            <div id="add_menu" tal:condition="api.context_has_permission('Add Meeting', api.root)">
                <a class="add_button" tal:attributes="href api.resource_url(api.root, request) + '@@add?content_type=Meeting'">
                    <img src="${request.application_url}/static/icons/icon_add.png"
                         width="16" height="16"
                         alt="Add meeting" title="Add meeting"
                         i18n:attributes="alt; title;" />
                </a>
            </div>
            <h5 class="header">
                <a href="${api.resource_url(api.root, request)}"
                   title="Select a meeting below"
                   i18n:attributes="title"
                   i18n:translate="">Meetings</a>
            </h5>
        </div>
		
		<div tal:replace="structure api.render_view_group(api.root, request, 'navigation_sections')">Nav sections</div>

    </tal:root>

    <tal:inside_meeting condition="api.meeting">
        <div class="block">
            <div id="add_menu" tal:condition="api.show_moderator_actions">
            	<a tal:attributes="href api.resource_url(api.meeting, request) + '@@order_agenda_items'">
                    <img src="${request.application_url}/static/icons/icon_arrow_up_down.png"
                         width="16" height="16"
                         alt="Order agenda items"
                         title="Order agenda items"
                         i18n:attributes="alt; title;" />
                </a>
                <a tal:attributes="href api.resource_url(api.meeting, request) + '@@add?content_type=AgendaItem'">
                    <img src="${request.application_url}/static/icons/icon_add.png"
                         width="16" height="16"
                         alt="Add agenda item"
                         title="Add agenda item"
                         i18n:attributes="alt; title;" />
                </a>
            </div>
            <h5 class="header">
                <a href="${api.resource_url(api.meeting, request)}"
                   title="Click to go to meeting overview"
                   i18n:attributes="title"
                   i18n:translate="">Agenda</a>
            </h5>
        </div>

        <div tal:replace="structure api.render_view_group(api.meeting, request, 'navigation_sections')">Nav sections</div>

    </tal:inside_meeting>
</metal:main>
