<metal:main define-macro="navigation"
            xmlns:i18n="http://xml.zope.org/namespaces/i18n"
			i18n:domain="voteit.core">
<div class="content_wrapper">
	<tal:root condition="not api.meeting">
	<h5 i18n:translate="">Available meetings</h5>
	<tal:iterate repeat="meeting api.get_restricted_content(api.root, content_type='Meeting')">
		<h5>
			<a tal:attributes="href api.resource_url(meeting, request)"
			   tal:content="meeting.get_field_value('title')">Meeting title</a>
		</h5>
		
	</tal:iterate>
	</tal:root>
	
	<tal:inside_meeting condition="api.meeting">
	<tal:agenda_items define="
	                        agenda_items_active api.get_restricted_content(api.meeting, content_type='AgendaItem', state='active');
                            agenda_items_inactive api.get_restricted_content(api.meeting, content_type='AgendaItem', state='inactive');
                            agenda_items_closed api.get_restricted_content(api.meeting, content_type='AgendaItem', state='closed');
                            agenda_items_private api.get_restricted_content(api.meeting, content_type='AgendaItem', state='private');">
		<div class="browse_up">
			<a tal:attributes="href api.resource_url(api.root, request)">
				&laquo; <span i18n:translate="">all meetings</span>
			</a>
		</div>
        <h5 class="header" i18n:translate="">
            Agenda
        </h5>
        <h6 class="closed" i18n:translate="">Closed</h6>
		<ul class="closed" tal:condition="agenda_items_closed">
		<tal:iterate repeat="agenda_item agenda_items_closed">
			<li tal:attributes="class api.inside(context, agenda_item) and 'selected' or 'plain'">
                <a tal:attributes="href api.resource_url(agenda_item, request)">
                   	<span tal:content="agenda_item.get_field_value('title')">Agenda item title</span>
					<span class="discussions"><img src="/static/images/discussion.png" alt="Discussions"/><span class="total" tal:content="len(agenda_item.get_content(content_type='DiscussionPost'))">0</span> (<span class="unread" tal:content="api.get_unread(agenda_item, content_type='DiscussionPost')">0</span>)</span>
					<span class="proposals"><img src="/static/images/proposal.png" alt="Proposals"/><span class="total" tal:content="len(agenda_item.get_content(content_type='Proposal'))">0</span> (<span class="unread" tal:content="api.get_unread(agenda_item, content_type='Proposal')">0</span>)</span>
				</a>
			</li>
		</tal:iterate>
		</ul>
        <h6 class="active" i18n:translate="">Active</h6>
		<ul class="active" tal:condition="agenda_items_active">
		<tal:iterate repeat="agenda_item agenda_items_active">
			<li tal:attributes="class api.inside(context, agenda_item) and 'selected' or 'plain'">
                <a tal:attributes="href api.resource_url(agenda_item, request)">
                   	<div tal:content="agenda_item.get_field_value('title')">Agenda item title</div>
    				<span class="discussions"><img src="/static/images/discussion.png" alt="Discussions"/><span class="total" tal:content="len(agenda_item.get_content(content_type='DiscussionPost'))">0</span> (<span class="unread" tal:content="api.get_unread(agenda_item, content_type='DiscussionPost')">0</span>)</span>
					<span class="proposals"><img src="/static/images/proposal.png" alt="Proposals"/><span class="total" tal:content="len(agenda_item.get_content(content_type='Proposal'))">0</span> (<span class="unread" tal:content="api.get_unread(agenda_item, content_type='Proposal')">0</span>)</span>
				</a>
			</li>
		</tal:iterate>
		</ul>
        <h6 class="inactive" i18n:translate="">Inactive</h6>
		<ul class="inactive" tal:condition="agenda_items_inactive">
		<tal:iterate repeat="agenda_item agenda_items_inactive">
			<li tal:attributes="class api.inside(context, agenda_item) and 'selected' or 'plain'">
                <a tal:attributes="href api.resource_url(agenda_item, request)">
                   	<span class="title" tal:content="agenda_item.get_field_value('title')">Agenda item title</span>
					<span class="discussions"><img src="/static/images/discussion.png" alt="Discussions"/><span class="total" tal:content="len(agenda_item.get_content(content_type='DiscussionPost'))">0</span> (<span class="unread" tal:content="api.get_unread(agenda_item, content_type='DiscussionPost')">0</span>)</span>
					<span class="proposals"><img src="/static/images/proposal.png" alt="Proposals"/><span class="total" tal:content="len(agenda_item.get_content(content_type='Proposal'))">0</span> (<span class="unread" tal:content="api.get_unread(agenda_item, content_type='Proposal')">0</span>)</span>
				</a>
			</li>
		</tal:iterate>
		</ul>
		<ul class="private" tal:condition="agenda_items_private">
		<tal:iterate repeat="agenda_item agenda_items_private">
			<li tal:attributes="class api.inside(context, agenda_item) and 'selected' or 'plain'">
                <a tal:attributes="href api.resource_url(agenda_item, request)">
                   	<span class="title" tal:content="agenda_item.get_field_value('title')">Agenda item title</span>
					<span class="discussions"><img src="/static/images/discussion.png" alt="Discussions"/><span class="total" tal:content="len(agenda_item.get_content(content_type='DiscussionPost'))">0</span> (<span class="unread" tal:content="api.get_unread(agenda_item, content_type='DiscussionPost')">0</span>)</span>
					<span class="proposals"><img src="/static/images/proposal.png" alt="Proposals"/><span class="total" tal:content="len(agenda_item.get_content(content_type='Proposal'))">0</span> (<span class="unread" tal:content="api.get_unread(agenda_item, content_type='Proposal')">0</span>)</span>
				</a>
			</li>
		</tal:iterate>
		</ul>
	</tal:agenda_items>
	</tal:inside_meeting>
</div>
</metal:main>
