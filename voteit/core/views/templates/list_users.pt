<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="load: ${api.template_dir}content.pt"
	  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
	  i18n:domain="voteit.core">
<body>
<div metal:fill-slot="full_window" id="content">
    <a tal:condition="api.context_has_permission('Add User', context)"
       style="float: right;" class="buttonize"
       href="${request.resource_url(context, 'add', query = {'content_type': 'User'})}" i18n:translate="">Add user</a>
    <h1 id="page_heading">
        <span i18n:translate="">
            Showing
            <span tal:replace="len(users)" i18n:name="count">5</span>
            users
        </span>
    </h1>

    <tal:messages replace="structure api.render_single_view_component(context, request, 'main', 'flash_messages')">Messages</tal:messages>
    <div class="clear"><!-- --></div>

    <table class="listing">
        <thead>
            <tr>
                <th i18n:translate="" class="heading">UserID</th>
                <th i18n:translate="" class="heading">First name</th>
                <th i18n:translate="" class="heading">Last name</th>
                <th i18n:translate="" class="heading">Email</th>
            </tr>
        </thead>
        <tbody>
            <tal:iterate repeat="user users">
            <tr tal:attributes="class repeat.user.odd and 'odd' or 'even'">
                <td>
                    <a tal:content="user.userid"
                       href="${api.resource_url(user, request)}">
                    Userid
                    </a>
                </td>
                <td tal:content="user.get_field_value('first_name')">Hanna</td>
                <td tal:content="user.get_field_value('last_name')">VoteIT</td>
                <td>
                    <a tal:content="user.get_field_value('email')"
                       tal:attributes="href 'mailto:%s' % user.get_field_value('email')">
                        voteit@betahaus.net
                    </a>
                </td>
            </tr>
            </tal:iterate>
        </tbody>
    </table>
    <br/>
    <a class="buttonize large"
       tal:attributes="href api.resource_url(context.__parent__, request)">
        <span i18n:translate="">Back</span>
    </a><br/>
</div> <!-- content -->
</body>
</html>