<html i18n:domain="voteit.core">
<body>

<metal:main define-macro="main" tal:define="current_ais agenda_items[state];">

<div tal:attributes="class is_closed and 'toggle_area toggle_closed' or 'toggle_area toggle_opened';
                     id '%s-%s' % (api.meeting.uid, state);">

	<h4 tal:attributes="class string:toggle_minimize $state">
	    <metal:heading define-slot="heading">Heading here</metal:heading>
	</h4>

	<div class="minimizable_area">
		
		<div tal:condition="over_limit[state]" class="load_more">
		    <a tal:attributes="href api.resource_url(context, request) + '?log_%s=all' % state"
		       i18n:translate="">
		        Show
		        <span tal:content="over_limit[state]" i18n:name="count">5</span>
		        hidden
		    </a>
        </div>

	    <tal:closed condition="current_ais" repeat="agenda_item current_ais">
	        <ul>
	            <li>
        	        <span tal:condition="api.show_moderator_actions" tal:replace="structure api.get_moderator_actions(agenda_item, request)">
                        Cogwheel menu
                    </span>
	                <a tal:attributes="href api.resource_url(agenda_item, request)">
	                    <div tal:content="agenda_item.title">Title</div>
						<!-- FIXME: Show start and close times for polls instead
	                    <div tal:content="structure api.get_time_info(agenda_item, request)">start time and end time macro</div>
						-->
	                    <div tal:content="agenda_item.get_field_value('summary')">Summary</div>
	                </a>
	            </li>
	        </ul>
	    </tal:closed>
	    <tal:no_active condition="not current_ais" i18n:translate="">
	        (Nothing)
	    </tal:no_active>
	
	</div>
	<div class="minimizable_inverted" i18n:translate="">(hidden, click above to open)</div>

</div>
</metal:main>

</body>
</html>
