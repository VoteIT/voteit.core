<tal:main xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="voteit.core">

<tal:iterate condition="proposals" repeat="proposal proposals" >
    <div tal:define="unread api.is_unread(proposal, True);
	                 state_id proposal.get_workflow_state();
					 css_class 'listing_block wf-state-%s' % state_id;"
         tal:attributes="class unread and 'unread %s' % css_class or css_class">

        <span tal:condition="api.show_moderator_actions" tal:replace="structure api.get_moderator_actions(proposal, request)">
             Cogwheel menu
        </span>	
		
        <tal:creators tal:replace="structure api.get_creators_info(proposal.creators, request)">Creators</tal:creators>
        <span i18n:translate="">propose</span>:
        <span class="body" tal:content="structure proposal.title">Title</span>

        <div class="meta">
            <span class="wf-state"
                    tal:content="api.translate(proposal.current_state_title(request))">private</span>

            <span class="hyphen">&#45;</span>

	        <span class="time" tal:content="api.get_time_created(proposal)"></span>

	        <span class="hyphen">&#45;</span>

	        <span tal:condition="show_retract(proposal)">
	        	<a class="retract confirm-retract"
		           tal:attributes="href api.resource_url(context, request) + '@@state?state=retracted'"
		           i18n:translate="">Retract</a>

    			<span class="hyphen">&#45;</span>
	        </span>

	        <span class="expressions" tal:content="structure api.expressions.get_expressions(proposal, 'like', api.userid, like, like_this)"></span>
		</div>
		
        <div class="clear"><!-- --></div>
    </div>
    
</tal:iterate>
</tal:main>
