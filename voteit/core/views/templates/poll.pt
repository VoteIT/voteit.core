<tal:main xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="voteit.core" define="poll api.context">

    <div id="booth" 
    	 tal:define="poll_plugin poll.get_poll_plugin()|None;
                     wf_state poll.get_workflow_state();
                     unread api.is_unread(poll);
                     can_vote api.context_has_permission('Add Vote', poll);
                     has_voted api.userid in poll;"
         tal:attributes="class unread and 'unread listing_block poll ' + poll.poll_plugin_name or 'listing_block poll ' + poll.poll_plugin_name;
                         name poll.__name__;">

		<h3 tal:content="poll.title">Title</h3>

        <div class="col-65-35">
            <div class="column column-1">
            	<div class="content_wrapper">
            	<div tal:content="structure api.get_poll_state_info(poll)">Poll state info</div>
                <div class="description"
                     tal:content="structure poll.description">Description</div>
                </div>
            </div>
            <div class="column column-2">
            	<div class="content_wrapper">
            	<div class="poll_type">
                    <strong i18n:translate="">Poll method</strong>: <span tal:content="poll_plugin.title|string:Broken plugin">Title</span>
                    <p tal:content="structure poll_plugin.description|string:">Description</p>
                </div>
                </div>
            </div>
        </div>

		<div class="clear"><!-- --></div>
		
		<tal:poll_open condition="wf_state != 'closed' and can_vote and form" content="structure form">
		Form
		</tal:poll_open>
		<tal:poll_closed condition="wf_state == 'closed'">
			<div class="result" 
		            tal:content="structure poll.render_poll_result(request)">
		        	    Poll result</div>
            <tal:user_voted condition="has_voted and poll_plugin">
                <div id="users-vote-${poll.uid}" class="toggle_area toggle_closed">
                    <a class="toggle_minimize read_more" i18n:translate="">Your vote</a>
                    <div class="minimizable_area"	
                         tal:condition="form|False">
                        <h3 i18n:translate="">You've voted</h3>
                        <div tal:content="structure form">Render your vote</div>
                    </div>
                    <div class="minimizable_inverted meta" i18n:translate="">You voted in this poll. Click above to show your vote.</div>
                </div>
            </tal:user_voted>

		</tal:poll_closed>

    </div>
    
</tal:main>
