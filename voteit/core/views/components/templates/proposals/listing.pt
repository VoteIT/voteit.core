<tal:main xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="voteit.core">
<div class="listing">
	<div tal:condition="tag"
	     class="tag-title">
	    <span i18n:translate="">Limited to <tal:tag i18n:name="tag_name">#${tag}</tal:tag></span>
	    <a class="tag icon-right arrow-right" tal:attributes="href clear_tag_url"
	       i18n:translate="">
	        Show all proposals
	    </a>
	    <div class="clear"><!-- --></div>
	</div>

    <!-- polls first -->
	<tal:iterate tal:repeat="poll polls">
	    <tal:poll replace="structure api.render_view_group(poll, request, 'poll')">Poll group here</tal:poll>
	</tal:iterate>

	<tal:iterate condition="proposals" repeat="proposal proposals">
	    <tal:proposal 
	    	replace="structure api.render_view_group(context, request, 'proposal', brain=proposal)">
	    	Proposal
	    </tal:proposal>	
	</tal:iterate>
	
	<!-- Load more - hidden at first -->
	<div class="listing_block load_new_ai_items listing_control">
	    <a name="proposals" href="${request.url}" class="icon-right arrow-right"
	       i18n:translate="">There are new proposals</a>
	</div>

    <div tal:condition="retracted_proposals" class="toggle_area toggle_closed">
        <div class="listing_block listing_control">
        <a class="toggle_minimize" href="javascript: void(0)" i18n:translate="">Show <tal:count i18n:name="count">${len(retracted_proposals)}</tal:count> retracted proposals</a>
        </div>
        <div class="minimizable_area">
            <tal:iterate repeat="proposal retracted_proposals">
                <tal:proposal replace="structure api.render_view_group(context, request, 'proposal', brain=proposal)">
                    Proposal
                </tal:proposal>
            </tal:iterate>
        </div>
    </div><!-- retracted -->

</div>
</tal:main>
