<tal:main xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="voteit.core">
<div id="ai-discussions" class="col-sm-6">
  <div class="list-group">
    <div class="list-group-item">
      <h4>
        <span class="glyphicon glyphicon-comment"></span>
        <span i18n:translate="">Discussion</span>
      </h4>
    </div>
    <a href="#"
      data-ai-method="load_previous_url"
      style="display: none;"
      class="list-group-item">
      <span class="glyphicon glyphicon-arrow-up"></span>
      <span data-json="load_previous_msg" i18n:translate="">Show previous</span>
      <span data-actionmarker="glyphicon glyphicon-refresh rotate-me"></span>
    </a>
    <a href="#"
      data-ai-method="show_previous"
      style="display: none;"
      class="list-group-item">
      <span class="glyphicon glyphicon-eye-open"></span>
      <span i18n:translate="">Show previous</span>
      <span data-filter-active style="display: none;" i18n:translate="">(within tag selection)</span>
    </a>
    <a href="#"
      data-ai-method="hide_previous"
      style="display: none;"
      class="list-group-item">
      <span class="glyphicon glyphicon-eye-close"></span>
      <span i18n:translate="">Hide previous</span>
    </a>
    <div data-discussion-posts>
      <div class="list-group-item" data-initial-loadstate>
        <span class="glyphicon glyphicon-refresh rotate-me"></span>
        Loading...
      </div>
    </div>
    <div tal:replace="structure view.render_template('voteit.core:templates/discussion_post.pt')"></div>
    <a href="#"
      data-ai-method="show_previous"
      style="display: none;"
      class="list-group-item">
      <span class="glyphicon glyphicon-eye-open"></span>
      <span i18n:translate="">Show previous</span>
      <span data-filter-active style="display: none;" i18n:translate="">(within tag selection)</span>
    </a>
    <a href="#"
      data-ai-method="hide_previous"
      style="display: none;"
      class="list-group-item">
      <span class="glyphicon glyphicon-eye-close"></span>
      <span i18n:translate="">Hide previous</span>
    </a>
    <a href="#"
      style="display: none;"
      data-ai-method="load_next_url"
      class="list-group-item">
      <span class="glyphicon glyphicon-arrow-down"></span>
      <span data-json="load_next_msg" i18n:translate="">Show more</span>
      <span data-actionmarker="glyphicon glyphicon-refresh rotate-me"></span>
    </a>
    <div class="well">
      <div tal:replace="structure view.render_template('voteit.core:templates/portlets/inline_add_button_disc.pt')"></div>
    </div>
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function() {
    voteit.discussion = new DiscussionHandler("${load_url}");
    voteit.discussion.fetch_data();
    voteit.unread.url = "${request.resource_url(context, '_mark_read')}";
    voteit.unread.notify();
  });
</script>
</tal:main>
