<div xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="voteit.core">
  <a data-clickable-target="${request.resource_url(context, 'add', query = {'content_type': 'Proposal', 'tag': request.GET.get('tag', '')})}"
    href="javascript:"
    class="btn btn-primary" i18n:translate="">Add a proposal</a>
  <script type="text/javascript">
    $("[data-clickable-target]").on('click', function(event) {
      var jthis;
      jthis = $(this);
      var url = jthis.data('clickable-target');
      var request = arche.do_request(url);
      request.done(function(data, textStatus, jqXHR) {
        jthis.parent().html(data);
        deform.processCallbacks();
        deform.focusFirstInput();
      });
    });
  </script>
  <script type="text/javascript" tal:condition="update_selector|False">
    $("${update_selector} [data-load-target]").each(function() {
      voteit.load_target(this);  
    });
  </script>
</div>
